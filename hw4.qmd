---
title: Homework 4
author: Catherine Cheu
date: February 17, 2023
---

1. Cross table analysis

```{python}
import numpy as np
import pandas as pd
import sqlite3 as sq
import gmplot as gm
import plotnine as pn
from plotnine import ggplot, geom_histogram
from plotnine import aes

import scipy.stats as scistats
import datetime as dt

dfnycraw = pd.read_csv("data/nyccrash_Jan2023.csv")

dfnycraw[["LATITUDE","LONGITUDE"]].replace(0.0, np.nan)

dfnycraw["MISSCO"] = (dfnycraw["LATITUDE"] == dfnycraw["LONGITUDE"]).astype(int)

cross = pd.crosstab(dfnycraw["BOROUGH"], dfnycraw["MISSCO"])

chi2, d, q, p = scistats.chi2_contingency(cross)

print(cross)

print(d)
```

2. Histogram based on hour

```{python}
dfnycraw["Hour"] = pd.to_datetime(dfnycraw["CRASH TIME"], format = "%H:%M").dt.hour

ggplot(dfnycraw, aes(x = dfnycraw["Hour"], fill = dfnycraw["BOROUGH"])) + geom_histogram(binwidth = 1)
```

3. Plot on NYC map

```{python}
lat = dfnycraw["LATITUDE"].drop.na()
long = dfnycraw["LONGITUDE"].drop.na()

gmap = gmplot.GoogleMapPlotter(40.769737, -73.91244, 14)
```