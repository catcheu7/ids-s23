---
title: Homework 4
author: Catherine Cheu
date: February 17, 2023
---

1. Cross table analysis

```{python}
import numpy as np
import pandas as pd
import sqlite3 as sq
import gmplot as gm
import plotnine as pn
from plotnine import ggplot
from plotnine import aes

import scipy.stats as scistats
import datetime as dt

dfnycraw = pd.read_csv("data/nyccrash_Jan2023.csv")

dfnycraw[["LATITUDE","LONGITUDE"]].replace(0.0, np.nan)

dfnycraw["MISSCO"] = (dfnycraw["LATITUDE"] == dfnycraw["LONGITUDE"]).astype(int)

cross = pd.crosstab(dfnycraw["BOROUGH"], dfnycraw["MISSCO"])

chi2, d, q, p = scistats.chi2_contingency(cross)

print(cross)

print(d)
```

2. Hour variable

```{python}
dfnycraw["Hour"] = pd.to_datetime(dfnycraw["CRASH TIME"], format = "%H:%M").dt.hour

```

3. Map onto a NYC map

4. Injury variable

5. Combine with zip code database

6. Logisitic regression